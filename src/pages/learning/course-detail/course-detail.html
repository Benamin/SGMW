<ion-header>
    <ion-navbar>
        <ion-title>课程详情</ion-title>
    </ion-navbar>
</ion-header>

<ion-content>
    <div #banner class="banner">
        <div class="background-image">
            <img [src]="product.detail?.ImageUrl" alt="">
        </div>
        <div class="content" *ngIf="!product.videoPath">
            <div class="content-info">
                <div class="course-name">
                    {{product.detail?.Title}}
                </div>
                <div class="course-desc">
                    <span><ion-icon style="vertical-align: text-bottom" name="text"></ion-icon>{{product.detail?.ZanCount}}</span>
                    <span><ion-icon style="vertical-align: middle" name="heart"></ion-icon>{{product.detail?.CollectionCount}}</span>
                </div>
            </div>
        </div>
        <div class="content video" *ngIf="product.videoPath">
            <video width="100%" height="100%" poster="{{product.chapter?.Course?.CoverUrl}}" [src]="product.videoPath" controls="controls">
                您的浏览器不支持 html5。
            </video>
        </div>
    </div>
<!--    <navbar #navbar [list]="navbarList" (done)="getNavbar($event)"></navbar>-->
    <div [hidden]="bar.show" #navbar class="navbar">
        <ng-container *ngFor="let item of navbarList;let i = index;">
            <div class="navbar-item" (click)="changeType(item)">
                <a href="#{{item.code}}" class="{{bar.type == item.type?'duty-title':''}}">{{item.name}}</a>
            </div>
        </ng-container>
    </div>
    <div  [hidden]="!bar.show" class="navbar" ion-fixed>
        <ng-container *ngFor="let item of navbarList;let i = index;">
            <div class="navbar-item" (click)="changeType(item)">
                <a href="#{{item.code}}" class="{{bar.type == item.type?'duty-title':''}}">{{item.name}}</a>
            </div>
        </ng-container>
    </div>

    <div #space class="space"></div>
    <div di="desc" class="item">
        <p>简介</p>
        <div class="introduction">
            {{product.detail?.Description}}
        </div>
    </div>
    <div class="space"></div>
    <div id="chapter" class="item">
        <p>章节</p>
        <div class="chapter">
            <ng-container *ngFor="let item of product.chapter?.Course?.children">
                <p style="font-weight: 500">{{item.title}}</p>
                <div *ngIf="item.children">
                    <tree-list [treeList]="item.children" [IsBuy]="product.detail?.IsBuy" (fileData)="getInfo($event)"></tree-list>
                </div>
            </ng-container>
        </div>
    </div>
    <div class="space"></div>
    <div id="teacher" class="item">
        <p>教师
            <span (click)="teachDetail()" float-end class="look">查看</span>
        </p>
        <div class="teacher-info" *ngFor="let item of  product.detail?.Teachers">
            <div class="img">
                <img [src]="item.HeadPhoto">
            </div>
            <div class="position">
                <p>{{item.UserName}}</p>
                <p>{{item.Position}}</p>
            </div>
            <div>
                <span *ngIf="item.IsSubscribe == false" (click)="focusHandle(item.UserID)" class="focus">关注</span>
                <span *ngIf="item.IsSubscribe == true" style="background-color:rgba(0,0,0,.2);color:#fff;" (click)="cancleFocusHandle(item.UserID)" class="focus">已关注</span>
            </div>
        </div>
    </div>
    <div class="space"></div>
    <div id="comment" class="item">
        <p>课程评价<span float-end class="look" (click)="goCourseComment()">更多</span></p>
        <div class="course-comment">
            <div>4.0</div>
            <div>
<!--                <p>1902个评价</p>-->
            </div>
            <div>
                <p>4.0</p>
                <p>课程适用</p>
            </div>
            <div>
                <p>4.5</p>
                <p>通俗易懂</p>
            </div>
            <div>
                <p>5.0</p>
                <p>逻辑清晰</p>
            </div>
        </div>
    </div>
    <div class="space"></div>
    <div class="item">
        <p>教师评价<span (click)="goTeacherComment()" float-end class="look">更多</span></p>
        <div class="teacher-comment">
            <div>4.0</div>
            <div>
<!--                <p>1902个评价</p>-->
            </div>
            <div>
                <p>4.0</p>
                <p>课程适用</p>
            </div>
            <div>
                <p>4.5</p>
                <p>通俗易懂</p>
            </div>
            <div>
                <p>5.0</p>
                <p>逻辑清晰</p>
            </div>
        </div>
    </div>
    <div class="space"></div>
    <div id="relation" class="item">
        <p>相关课程</p>
        <course-list [list]="learnList" (done)="goCourse($event)"></course-list>
    </div>
</ion-content>

<ion-footer class="course-footer">
    <ion-toolbar *ngIf="!product.detail?.IsBuy" (click)="sign()">
        <ion-buttons tappable>立即报名</ion-buttons>
    </ion-toolbar>
    <ion-toolbar *ngIf="product.detail?.IsBuy" (click)="studyNow()">
        <ion-buttons tappable >立即学习</ion-buttons>
    </ion-toolbar>
    <ion-toolbar *ngIf="!product.detail?.IsCollection" (click)="collection()">
        <ion-buttons>收藏</ion-buttons>
    </ion-toolbar>

    <ion-toolbar *ngIf="product.detail?.IsCollection" (click)="cancleCollection()">
        <ion-buttons class="collectionDone">
            <ion-icon style="vertical-align: middle" name="heart"></ion-icon>已收藏</ion-buttons>
    </ion-toolbar>

</ion-footer>

<div *ngIf="signObj.isSign" class="sign">
    <img src="../assets/imgs/course/sign-success.png">
    <p>报名成功</p>
</div>
<div *ngIf="collectionObj.isCollection" class="collection">
    <img src="../assets/imgs/course/collection-success.png">
    <p>收藏成功</p>
</div>
